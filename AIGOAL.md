# AI-Driven SEO Analysis - Project Goal

## ğŸ¯ Vision & MÃ¥l

### Vad Ã¤r AI-analysen?
En professionell SEO-rapport som kombinerar:
- FullstÃ¤ndig webbplatscrawl (befintlig teknologi)
- Lighthouse performance-analys (befintlig teknologi)
- **NYT: Automatisk konkurrentjÃ¤mfÃ¶relse (3 konkurrenter)**
- **NYT: AI-driven analys och prioritering (DeepSeek)**
- **NYT: Konkreta handlingsplaner med kod-exempel**
- **NYT: Historisk tracking Ã¶ver tid**

### VarfÃ¶r gÃ¶r vi den?
- **Differentiera oss**: Skilja oss frÃ¥n gratis-verktyg som bara visar data
- **Ã–ka vÃ¤rdet**: FrÃ¥n "hÃ¤r Ã¤r problemen" till "hÃ¤r Ã¤r lÃ¶sningen + i vilken ordning"
- **Ã–ka trafik**: Locka fler anvÃ¤ndare med premium-feature som Ã¤r gratis
- **Testimonials**: Professionell rapport = mer delningsbar = organisk tillvÃ¤xt
- **Monetization path**: Kan senare bli premium medan basic analyser Ã¤r gratis

### Vad skiljer den frÃ¥n befintliga analyser?

| Feature | SEO/CRAWL/PERF (befintlig) | AI-Analys (ny) |
|---------|---------------------------|----------------|
| Hastighet | Snabb (10-30s) | LÃ¥ngsam (60-90s) |
| Omfattning | En webbplats | 4 webbplatser (user + 3 konkurrenter) |
| Output | Teknisk data | Strategisk handlingsplan |
| Konkurrenter | Nej | Ja (automatiskt) |
| AI-insights | Nej | Ja (DeepSeek) |
| Prioritering | AnvÃ¤ndaren vÃ¤ljer | AI prioriterar |
| Kod-exempel | BegrÃ¤nsat | Omfattande |
| Historik | Nej | Ja |
| Use case | "Vad Ã¤r fel?" | "Vad ska jag gÃ¶ra? Hur? I vilken ordning?" |

---

## ğŸ’ VÃ¤rdeproposition

### Vad anvÃ¤ndaren fÃ¥r:
1. âœ… **Komplett SEO-crawl** av hela webbplatsen
2. âœ… **Lighthouse performance-analys** (Core Web Vitals)
3. âœ… **LIX-analys** (svensk lÃ¤sbarhet)
4. âœ… **Automatisk konkurrentidentifiering** (3 SEO-konkurrenter)
5. âœ… **KonkurrentjÃ¤mfÃ¶relse** (sida-vid-sida tabell)
6. âœ… **AI-prioriterad handlingsplan** (kritiskt â†’ viktigt â†’ lÃ¥ngsiktigt)
7. âœ… **Konkreta kod-exempel** (copy-paste lÃ¶sningar)
8. âœ… **Effektuppskattningar** (fÃ¶rvÃ¤ntad ROI)
9. âœ… **Historisk tracking** (fÃ¶lj fÃ¶rbÃ¤ttring Ã¶ver tid)
10. âœ… **PDF-export** (dela med team/chef)

### VÃ¤rde vs konkurrenter:

|  | Vi | Screaming Frog | Sitebulb | SEMrush | ByrÃ¥ |
|--|---|----------------|----------|---------|------|
| **Pris** | Gratis | Â£149/Ã¥r | $420/Ã¥r | $1548/Ã¥r | 15-50k kr |
| **SEO Crawl** | âœ… | âœ… | âœ… | âœ… | âœ… |
| **Performance** | âœ… | âŒ | âœ… | âœ… | âœ… |
| **LIX (svenska)** | âœ… | âŒ | âŒ | âŒ | Manuell |
| **KonkurrentjÃ¤mfÃ¶relse** | âœ… Auto | âŒ | âŒ | âœ… Manuell | âœ… |
| **AI-analys** | âœ… | âŒ | âŒ | BegrÃ¤nsad | âœ… |
| **Kod-exempel** | âœ… | âŒ | âŒ | âŒ | âœ… |
| **Historik** | âœ… | âŒ | âœ… | âœ… | âœ… |
| **No signup** | âœ… | âŒ | âŒ | âŒ | âŒ |

### Kostnad fÃ¶r oss:
- **DeepSeek AI**: ~5 Ã¶re/analys
- **Server (crawl 4 sites)**: ~2 Ã¶re/analys
- **Databas storage**: ~1 Ã¶re/analys
- **Total**: **~8 Ã¶re/analys**

Med 1000 analyser/mÃ¥nad = 80 kr i kostnader. Extremt skalbart.

---

## ğŸ¨ User Flow

### 1. Startsida (befintlig + ny CTA)

**VIKTIGT**: Befintlig funktionalitet fÃ¥r INTE pÃ¥verkas!

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BEFINTLIG HERO (ofÃ¶rÃ¤ndrad)                    â”‚
â”‚                                                 â”‚
â”‚ [SEO] [CRAWL] [PERF]                           â”‚
â”‚ [Analysera nu]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â†“
              (eller-sektion)
                    â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– Vill du ha en AI-driven professionell       â”‚
â”‚    SEO-rapport med konkurrentjÃ¤mfÃ¶relse?       â”‚
â”‚                                                 â”‚
â”‚ â€¢ JÃ¤mfÃ¶r dig mot 3 konkurrenter                â”‚
â”‚ â€¢ FÃ¥ prioriterad handlingsplan                 â”‚
â”‚ â€¢ Konkreta kod-exempel                         â”‚
â”‚ â€¢ Helt gratis under beta                       â”‚
â”‚                                                 â”‚
â”‚ [LÃ¤s mer om AI-analysen â†’]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Landingpage: /ai-analys

**Hero:**
```
ğŸ¤– AI-driven SEO-analys med konkurrentjÃ¤mfÃ¶relse

FÃ¥ en professionell SEO-rapport som visar exakt vad du ska
fixa, i vilken ordning, och hur det pÃ¥verkar din ranking.

[Starta AI-analys â†“]
```

**Vad du fÃ¥r (benefits):**
- Grid med ikoner + beskrivningar
- Visuell jÃ¤mfÃ¶relse: "Din site" vs "3 konkurrenter"
- Exempel pÃ¥ rapport-snippets

**Vs konkurrenter (trust):**
- Tabell (som ovan)
- Social proof om mÃ¶jligt

**CTA (samma stil som startsida):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ange din webbplats                     â”‚
â”‚ [www.dinwebbplats.se]                  â”‚
â”‚                                         â”‚
â”‚ [ğŸ¤– Starta AI-analys (60-90s)]         â”‚
â”‚                                         â”‚
â”‚ Ingen registrering â€¢ Gratis under beta â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Loading: /ai-analys/[jobId]

**Live progress-indikator:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AI analyserar ekonomistudion.se     â”‚
â”‚                                         â”‚
â”‚ âœ… Crawlade din webbplats (15 sidor)   â”‚
â”‚ âœ… Analyserade prestanda               â”‚
â”‚ âœ… Identifierade konkurrenter          â”‚
â”‚ ğŸ”„ Crawlar konkurrenter (2/3)...       â”‚
â”‚ â¸ï¸  AI-analys vÃ¤ntar...                 â”‚
â”‚                                         â”‚
â”‚ [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 75%                 â”‚
â”‚                                         â”‚
â”‚ Uppskattat: 30 sekunder kvar           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Rapport: /ai-analys/[jobId] (completed)

**Sektioner:**

1. **Executive Summary**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ SEO-hÃ¤lsa: 67/100                   â”‚
â”‚ Status: Gott, men kan fÃ¶rbÃ¤ttras       â”‚
â”‚                                         â”‚
â”‚ Din webbplats har bra grundstruktur    â”‚
â”‚ men saknar viktig SEO-optimering jÃ¤mfÃ¶rtâ”‚
â”‚ med konkurrenterna.                     â”‚
â”‚                                         â”‚
â”‚ â€¢ 3 kritiska problem                   â”‚
â”‚ â€¢ 8 fÃ¶rbÃ¤ttringsmÃ¶jligheter            â”‚
â”‚ â€¢ Potential: +35-45% organisk trafik   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

2. **KonkurrentjÃ¤mfÃ¶relse**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š DU VS KONKURRENTER                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Du    Konk 1  Konk 2  Konk 3  Snitt â”‚
â”‚ Antal sidor      15      42      38      28     36   â”‚
â”‚ Ord/sida        450    1250    1180     890   1107   â”‚
â”‚ LIX              52      45      48      44     46   â”‚
â”‚ Laddningstid   4.2s    2.1s    1.8s    2.9s    2.3s  â”‚
â”‚ Meta desc.     3/15   42/42   38/38   28/28   100%  â”‚
â”‚ H2/sida           3       8      12       6      9   â”‚
â”‚ Bilder alt    12/45   98/98   87/87   56/56   100%  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ Vi analyserade ekonomikonsult.se, redovisnings-  â”‚
â”‚    byrÃ¥n.se, och bokfÃ¶ring.se (dina stÃ¶rsta SEO-    â”‚
â”‚    konkurrenter baserat pÃ¥ Google-ranking)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

3. **AI-prioriterad handlingsplan**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”´ Ã…TGÃ„RDA NU (hÃ¶gsta prioritet)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. âš¡ LÃ¥ngsam laddningstid              â”‚
â”‚    Nuvarande: 4.2s | MÃ¥l: <2.5s        â”‚
â”‚    Impact: HÃ¶g | Effort: Medel         â”‚
â”‚                                         â”‚
â”‚    ğŸ’¡ Komprimera bilder (-2.3 MB)      â”‚
â”‚    ğŸ’¡ Aktivera browser caching         â”‚
â”‚    ğŸ’¡ Minifiera CSS/JS                 â”‚
â”‚                                         â”‚
â”‚    Konkurrenterna laddar 48% snabbare  â”‚
â”‚    Ã¤n dig. Google prioriterar snabba   â”‚
â”‚    sidor i ranking.                    â”‚
â”‚                                         â”‚
â”‚    [Visa kod-exempel â†“]                â”‚
â”‚                                         â”‚
â”‚ 2. ğŸ“ Meta descriptions saknas          â”‚
â”‚    12 av 15 sidor saknar beskrivning   â”‚
â”‚    Impact: HÃ¶g | Effort: LÃ¥g           â”‚
â”‚    ...                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

4. **Konkreta kod-exempel**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’» SÃ… HÃ„R FIXAR DU DET                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Problem: Saknar meta description       â”‚
â”‚                                         â”‚
â”‚ âŒ FÃ–RE:                                â”‚
â”‚ <head>                                 â”‚
â”‚   <title>Ekonomistudion</title>       â”‚
â”‚ </head>                                â”‚
â”‚                                         â”‚
â”‚ âœ… EFTER:                               â”‚
â”‚ <head>                                 â”‚
â”‚   <title>Ekonomistudion - Expert pÃ¥   â”‚
â”‚    fÃ¶retagsekonomi | Stockholm</title>â”‚
â”‚   <meta name="description"            â”‚
â”‚     content="Professionell ekonomi-   â”‚
â”‚     rÃ¥dgivning fÃ¶r fÃ¶retag i Stockholmâ”‚
â”‚     Redovisning, bokfÃ¶ring & skatt."> â”‚
â”‚ </head>                                â”‚
â”‚                                         â”‚
â”‚ ğŸ“‹ [Kopiera kod]                       â”‚
â”‚ ğŸ“– [LÃ¤s mer om meta descriptions]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

5. **FÃ¶rvÃ¤ntad effekt**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ FÃ–RVÃ„NTAD EFFEKT                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Om du fixar alla kritiska problem:     â”‚
â”‚                                         â”‚
â”‚ Laddningstid: 4.2s â†’ 1.8s (-57%) âš¡    â”‚
â”‚ Google-ranking: +15-25 platser ğŸ“ˆ      â”‚
â”‚ Organisk trafik: +35-45% ğŸ“Š            â”‚
â”‚ Bounce rate: 65% â†’ 48% ğŸ¯              â”‚
â”‚                                         â”‚
â”‚ Baserat pÃ¥ branschdata och konkurrent- â”‚
â”‚ analys. Tidskostnad: 4-6 timmar.       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

6. **Actions**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ“¥ Ladda ner PDF-rapport]             â”‚
â”‚ [ğŸ“§ Emaila rapporten till mig]         â”‚
â”‚ [ğŸ”„ KÃ¶r om analys om 30 dagar]         â”‚
â”‚ [ğŸ“Š Se historik] (om tidigare analys)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Teknisk Arkitektur

### Nya routes:

1. **`/ai-analys`** (landingpage)
   - Static page med info + CTA
   - Samma form-komponent som startsidan (Ã¥teranvÃ¤nd)
   - POST till `/api/ai-analyze`

2. **`/ai-analys/[jobId]`** (resultat)
   - Loading state (polling `/api/ai-analyze/[jobId]/status`)
   - Rapport-vy nÃ¤r klar
   - Delbar via URL

### Nya API endpoints:

1. **`POST /api/ai-analyze`**
   - Input: `{ url: "ekonomistudion.se" }`
   - Output: `{ jobId: "abc123" }`
   - Startar background job

2. **`GET /api/ai-analyze/[jobId]/status`**
   - Output: `{ status: "crawling" | "analyzing" | "completed", progress: 0-100, result?: {...} }`

3. **`GET /api/ai-analyze/[jobId]/download`**
   - Genererar PDF
   - Returnerar fil

### Workflow (backend):

```javascript
// POST /api/ai-analyze
async function aiAnalyze(url) {
  const jobId = generateJobId();

  // 1. Spara job i DB (status: "pending")
  await db.aiAnalysis.create({ id: jobId, url, status: "pending" });

  // 2. Starta background job (Ã¥teranvÃ¤nd befintlig queue)
  await queue.add("ai-analysis", { jobId, url });

  return { jobId };
}

// Background worker
async function processAiAnalysis({ jobId, url }) {
  try {
    // 1. Crawla user's site (Ã¥teranvÃ¤nd befintlig crawler)
    updateStatus(jobId, "crawling_user", 10);
    const userSite = await crawlSite(url, maxPages: 100);

    // 2. Hitta konkurrenter
    updateStatus(jobId, "finding_competitors", 25);
    const competitors = await findCompetitors(userSite);
    // competitors = ["ekonomikonsult.se", "redovisningsbyrÃ¥n.se", "bokfÃ¶ring.se"]

    // 3. Crawla konkurrenter (parallellt)
    updateStatus(jobId, "crawling_competitors", 40);
    const competitorData = await Promise.all(
      competitors.map(comp => crawlSite(comp, maxPages: 50))
    );

    // 4. Aggregera data
    updateStatus(jobId, "aggregating_data", 70);
    const analysisData = {
      user: {
        url,
        seo: userSite.seo,
        lighthouse: userSite.lighthouse,
        lix: userSite.lix,
        wordCount: userSite.wordCount,
        pages: userSite.pages.length,
        // ... all befintlig data
      },
      competitors: competitorData.map(comp => ({
        url: comp.url,
        seo: comp.seo,
        // ... samma data som user
      }))
    };

    // 5. Skicka till DeepSeek AI
    updateStatus(jobId, "ai_analysis", 80);
    const aiReport = await generateAiReport(analysisData);

    // 6. Spara resultat
    updateStatus(jobId, "completed", 100);
    await db.aiAnalysis.update(jobId, {
      status: "completed",
      result: {
        data: analysisData,
        report: aiReport
      }
    });

  } catch (error) {
    await db.aiAnalysis.update(jobId, {
      status: "failed",
      error: error.message
    });
  }
}
```

### AI-integration (DeepSeek):

```javascript
async function generateAiReport(analysisData) {
  const prompt = `
Du Ã¤r en erfaren SEO-konsult. Analysera fÃ¶ljande data och skapa en
professionell SEO-rapport pÃ¥ svenska.

ANVÃ„NDARENS WEBBPLATS:
${JSON.stringify(analysisData.user, null, 2)}

KONKURRENTER (3 st):
${JSON.stringify(analysisData.competitors, null, 2)}

UPPGIFT:
1. JÃ¤mfÃ¶r anvÃ¤ndaren mot konkurrenterna
2. Identifiera 3 kritiska problem (high impact, fixable)
3. Identifiera 5-8 viktiga fÃ¶rbÃ¤ttringar
4. Ge konkreta kod-exempel fÃ¶r top 3 problemen
5. Uppskatta effekt (ranking, trafik, conversions)
6. Prioritera baserat pÃ¥ impact vs effort

FORMAT (JSON):
{
  "summary": {
    "score": 0-100,
    "status": "string",
    "description": "2-3 meningar",
    "criticalIssues": number,
    "improvements": number,
    "potentialTrafficIncrease": "X-Y%"
  },
  "comparison": {
    "metrics": [
      {
        "name": "Antal sidor",
        "user": number,
        "competitor1": number,
        "competitor2": number,
        "competitor3": number,
        "average": number
      },
      // ... fler metrics
    ],
    "insight": "string"
  },
  "criticalIssues": [
    {
      "title": "string",
      "current": "string",
      "target": "string",
      "impact": "high|medium|low",
      "effort": "high|medium|low",
      "description": "string",
      "solution": ["string"],
      "codeExample": {
        "before": "string",
        "after": "string",
        "language": "html|css|js"
      },
      "competitorInsight": "string"
    }
  ],
  "improvements": [ /* samma struktur */ ],
  "expectedImpact": {
    "loadTime": { "before": "4.2s", "after": "1.8s", "change": "-57%" },
    "ranking": "+15-25 platser",
    "traffic": "+35-45%",
    "bounceRate": { "before": "65%", "after": "48%" }
  }
}
`;

  const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`
    },
    body: JSON.stringify({
      model: 'deepseek-chat',
      messages: [
        { role: 'system', content: 'Du Ã¤r en expert SEO-konsult.' },
        { role: 'user', content: prompt }
      ],
      response_format: { type: 'json_object' },
      temperature: 0.7
    })
  });

  const data = await response.json();
  return JSON.parse(data.choices[0].message.content);
}
```

### Konkurrent-identifiering:

```javascript
async function findCompetitors(userSite) {
  // 1. Extrahera keywords frÃ¥n user's site
  const keywords = extractTopKeywords(userSite, limit: 5);
  // -> ["ekonomikonsult", "stockholm", "redovisning", "fÃ¶retag", "bokfÃ¶ring"]

  // 2. Bygg Google-sÃ¶kning
  const domain = new URL(userSite.url).hostname;
  const tld = domain.split('.').pop(); // "se"
  const query = `${keywords.join(' ')} site:*.${tld} -site:${domain}`;
  // -> "ekonomikonsult stockholm redovisning... site:*.se -site:ekonomistudion.se"

  // 3. SÃ¶k Google (anvÃ¤nd puppeteer eller API)
  const searchResults = await searchGoogle(query, limit: 10);

  // 4. Filtrera relevanta resultat
  const competitors = searchResults
    .filter(result => {
      // Ta bort listor, jÃ¤mfÃ¶relsesajter, wikipedia etc
      const blacklist = ['wikipedia', 'pricerunner', 'prisjakt', 'google'];
      return !blacklist.some(b => result.url.includes(b));
    })
    .slice(0, 3)
    .map(r => r.url);

  return competitors;
}

function extractTopKeywords(siteData, limit = 5) {
  // 1. Samla all text frÃ¥n H1, H2, meta description, title
  const text = [
    siteData.seo?.h1?.join(' '),
    siteData.seo?.h2?.join(' '),
    siteData.seo?.metaDescription,
    siteData.seo?.title
  ].join(' ');

  // 2. Tokenize + remove stopwords
  const stopwords = ['och', 'i', 'Ã¤r', 'fÃ¶r', 'pÃ¥', 'med', 'att', 'en', 'som', 'av', 'till', 'frÃ¥n'];
  const words = text
    .toLowerCase()
    .split(/\s+/)
    .filter(w => w.length > 3 && !stopwords.includes(w));

  // 3. Count frequency
  const frequency = {};
  words.forEach(w => frequency[w] = (frequency[w] || 0) + 1);

  // 4. Sort by frequency, return top N
  return Object.entries(frequency)
    .sort((a, b) => b[1] - a[1])
    .slice(0, limit)
    .map(([word]) => word);
}
```

### Databas schema (Prisma):

```prisma
model AiAnalysis {
  id            String   @id @default(cuid())
  url           String
  status        String   // "pending" | "crawling_user" | "finding_competitors" | "crawling_competitors" | "aggregating_data" | "ai_analysis" | "completed" | "failed"
  progress      Int      @default(0) // 0-100

  // Results (nÃ¤r completed)
  userData      Json?    // Crawl data fÃ¶r user's site
  competitorData Json?   // Array av 3 konkurrenters data
  aiReport      Json?    // AI-genererad rapport

  // Metadata
  createdAt     DateTime @default(now())
  completedAt   DateTime?
  error         String?

  // FÃ¶r historik (koppla till user om vi lÃ¤gger till auth senare)
  userEmail     String?

  @@index([url, createdAt])
}
```

---

## ğŸ“‹ Implementation Roadmap

### Fas 1: MVP (v1.0) - Vecka 1-2

**MÃ¥l**: Lansera grundlÃ¤ggande AI-analys

**Features:**
- âœ… Landingpage `/ai-analys` med info + CTA
- âœ… CTA pÃ¥ startsidan "LÃ¤s mer om AI-analysen"
- âœ… POST `/api/ai-analyze` - startar analys
- âœ… Automatisk konkurrentidentifiering (Google search)
- âœ… Crawl user + 3 konkurrenter (Ã¥teranvÃ¤nd befintlig crawler)
- âœ… DeepSeek AI-integration
- âœ… Basic AI-rapport med:
  - Executive summary
  - KonkurrentjÃ¤mfÃ¶relse (tabell)
  - Top 3 kritiska problem
  - 5 fÃ¶rbÃ¤ttringar
  - 2-3 kod-exempel
- âœ… Loading-sida med progress
- âœ… Resultat-sida med rapport
- âœ… Databas (Prisma schema)

**Tekniska tasks:**
1. Skapa `/src/app/ai-analys/page.js` (landingpage)
2. Skapa `/src/app/ai-analys/[jobId]/page.js` (resultat)
3. Skapa `/src/app/api/ai-analyze/route.js` (POST)
4. Skapa `/src/app/api/ai-analyze/[jobId]/status/route.js` (GET)
5. Implementera `findCompetitors()` funktion
6. Implementera `generateAiReport()` funktion (DeepSeek)
7. Skapa React-komponenter fÃ¶r rapport-rendering
8. LÃ¤gg till CTA pÃ¥ startsidan (under befintlig hero)
9. Prisma migration fÃ¶r `AiAnalysis` model
10. Testa hela flÃ¶det

**Success criteria:**
- User kan starta AI-analys
- Konkurrenter hittas automatiskt
- AI-rapport genereras framgÃ¥ngsrikt
- Rapport visas fint i UI
- Kostnad: <10 Ã¶re/analys

---

### Fas 2: FÃ¶rbÃ¤ttringar (v1.1) - Vecka 3-4

**MÃ¥l**: FÃ¶rbÃ¤ttra AI-rapporten och UX

**Features:**
- âœ… BÃ¤ttre AI-prompt (mer actionable insights)
- âœ… Fler kod-exempel (top 5 problem)
- âœ… Effektuppskattningar (ranking, trafik, conversions)
- âœ… PDF-export
- âœ… Email-funktion (skicka rapport till email)
- âœ… BÃ¤ttre error handling
- âœ… Retry logic om AI failar
- âœ… Caching (om samma site analyseras inom 24h, visa cached)

**Tekniska tasks:**
1. FÃ¶rbÃ¤ttra `generateAiReport()` prompt
2. Implementera PDF-generering (Ã¥teranvÃ¤nd befintlig PDF-renderer)
3. Implementera email-funktion
4. LÃ¤gg till caching-logic
5. BÃ¤ttre error messages
6. A/B testa olika AI-prompts

---

### Fas 3: Historisk tracking (v1.2) - Vecka 5-6

**MÃ¥l**: Spara historik och visa fÃ¶rbÃ¤ttring Ã¶ver tid

**Features:**
- âœ… Spara varje analys i databas
- âœ… Visa tidigare analyser (om samma URL)
- âœ… JÃ¤mfÃ¶r "FÃ¶rra mÃ¥naden vs Nu"
- âœ… Trend-grafer (score Ã¶ver tid)
- âœ… "KÃ¶r om analys om 30 dagar" reminder

**Tekniska tasks:**
1. Uppdatera databas-schema fÃ¶r historik
2. Implementera historik-vy
3. Skapa trend-grafer (Chart.js eller Recharts)
4. LÃ¤gg till reminder-funktion (email eller push notification)

---

### Fas 4: Premium features (v2.0) - Framtid

**MÃ¥l**: Monetization

**Features:**
- âœ… Freemium: 1 AI-analys/mÃ¥nad gratis, unlimited med premium
- âœ… Spara konkurrentlistor
- âœ… Schema'd analyser (auto-kÃ¶r varje vecka/mÃ¥nad)
- âœ… White-label PDF (byrÃ¥-kunder)
- âœ… API-access

---

## ğŸš« Viktiga Constraints

### FÃ¥r INTE pÃ¥verka:
- âŒ Befintlig startsida-layout (bara lÃ¤gga till ny CTA-sektion)
- âŒ SEO/CRAWL/PERF funktionalitet (mÃ¥ste fungera som innan)
- âŒ Befintliga API endpoints
- âŒ Befintlig databas-struktur (bara lÃ¤gga till ny tabell)
- âŒ Performance pÃ¥ befintliga features

### MÃ¥ste vara:
- âœ… Helt separerad feature (egna routes, egna API endpoints)
- âœ… Kan leva sida-vid-sida med befintlig funktionalitet
- âœ… Kan tas bort utan att pÃ¥verka resten av siten
- âœ… Ã…teranvÃ¤nder befintliga komponenter dÃ¤r mÃ¶jligt (crawler, PDF, etc)

---

## ğŸ“Š Success Metrics

### KPIs:
1. **Conversion rate**: % av visitors som klickar "LÃ¤s mer"
   - MÃ¥l: >5% efter 1 mÃ¥nad

2. **Start rate**: % som startar AI-analys frÃ¥n landingpage
   - MÃ¥l: >20%

3. **Completion rate**: % som vÃ¤ntar tills rapporten Ã¤r klar
   - MÃ¥l: >80%

4. **Avg time on report page**: Hur lÃ¤nge lÃ¤ser de rapporten?
   - MÃ¥l: >3 min (betyder att den Ã¤r intressant)

5. **Share rate**: % som delar/exporterar PDF
   - MÃ¥l: >15%

6. **Return rate**: % som kÃ¶r om analys inom 30 dagar
   - MÃ¥l: >10%

### Kvalitativa metrics:
- User feedback (survey efter rapport)
- Testimonials
- Social shares
- Organic mentions

---

## ğŸ’° Cost & Monetization

### Kostnader:

**Per AI-analys:**
- DeepSeek API: ~5 Ã¶re
- Server (4 sites crawl): ~2 Ã¶re
- Database storage: ~1 Ã¶re
- **Total: ~8 Ã¶re/analys**

**MÃ¥nadskostnad vid olika volymer:**
- 100 analyser/mÃ¥n: 8 kr
- 1,000 analyser/mÃ¥n: 80 kr
- 10,000 analyser/mÃ¥n: 800 kr
- 100,000 analyser/mÃ¥n: 8,000 kr

**Extremt skalbart!**

### Monetization strategy:

**Fas 1-3 (6 mÃ¥nader): Gratis fÃ¶r alla**
- Bygg anvÃ¤ndarbas
- Samla testimonials
- FÃ¥ feedback
- FÃ¶rbÃ¤ttra produkt

**Fas 4 (efter 6 mÃ¥n): Freemium**
```
GRATIS:
â€¢ 1 AI-analys/mÃ¥nad
â€¢ Basic rapport
â€¢ 30 dagars historik

PREMIUM (299 kr/mÃ¥n):
â€¢ 10 AI-analyser/mÃ¥nad
â€¢ Unlimited historik
â€¢ PDF white-label
â€¢ Priority support
â€¢ Email reminders

PRO (999 kr/mÃ¥n):
â€¢ Unlimited analyser
â€¢ API-access
â€¢ Schema'd analyser
â€¢ Team collaboration
```

**ROI-berÃ¤kning:**
- 100 betalande premium users = 29,900 kr/mÃ¥n
- Kostnader (1000 analyser): 80 kr/mÃ¥n
- **Profit: 29,820 kr/mÃ¥n (99.7% margin)**

---

## ğŸ¯ Differentiators (varfÃ¶r vi Ã¤r bÃ¤ttre)

### Vs Screaming Frog / Sitebulb:
- âœ… Vi har AI-analys (de har bara data)
- âœ… Vi har konkurrentjÃ¤mfÃ¶relse automatiskt
- âœ… Vi har kod-exempel
- âœ… Vi Ã¤r gratis
- âœ… No signup required

### Vs SEMrush / Ahrefs:
- âœ… Vi Ã¤r gratis (de kostar 1500-2000 kr/mÃ¥n)
- âœ… Vi har LIX-analys (svenska)
- âœ… Vi Ã¤r enklare (de Ã¤r Ã¶vervÃ¤ldigande)
- âœ… Vi fokuserar pÃ¥ actionable (de fokuserar pÃ¥ data)
- âŒ De har keyword research (vi har inte... Ã¤n)
- âŒ De har backlink-analys (vi har inte... Ã¤n)

### Vs SEO-byrÃ¥er:
- âœ… Vi Ã¤r instant (de tar dagar/veckor)
- âœ… Vi Ã¤r gratis (de kostar 15-50k kr)
- âœ… Vi Ã¤r objektiva (AI, inte sÃ¤ljare)
- âŒ De har manuell expert-granskning
- âŒ De har strategi-workshop
- âŒ De implementerar Ã¥t dig

**VÃ¥r position**: Mellan gratis-verktyg och dyra byrÃ¥er. "Professional-grade rapport till hobbyist-pris."

---

## ğŸš€ Next Steps

1. **GodkÃ¤nn detta dokument**
2. **SÃ¤tt upp DeepSeek API-key**
3. **Starta Fas 1 implementation**
4. **Testa med 3-5 test-siter**
5. **Lansera som beta**
6. **Samla feedback**
7. **Iterera**

---

## ğŸ“ Notes

- Detta dokument Ã¤r ett levande dokument - uppdatera nÃ¤r planer Ã¤ndras
- All kod ska fÃ¶lja befintliga patterns i projektet
- Prioritera hastighet (MVP) Ã¶ver perfektion
- AnvÃ¤ndarfeedback styr utvecklingen
- HÃ¥ll det enkelt - komplexitet kan lÃ¤ggas till senare

---

## ğŸ”® FRAMTIDA ANALYSTYPER (Rekommendationer 2025-12-21)

### Prioritet 1: SÃ¤kerhetsanalys (UI finns redan!)
**Status:** UI-komponenter (`SeoTabSecurity`, `SeoTabDNS`) vÃ¤ntar pÃ¥ data

**InnehÃ¥ll:**
- HTTP security headers (CSP, HSTS, X-Frame-Options)
- SSL/TLS-kvalitet (certifikat, protokollversion)
- SPF/DMARC/DKIM fÃ¶r email-sÃ¤kerhet
- Cookie-sÃ¤kerhet (Secure, HttpOnly, SameSite)

**Implementering:** Enkel - krÃ¤ver ingen extern API, endast HTTP requests

---

### Prioritet 2: InnehÃ¥llsanalys
**VÃ¤rde:** HÃ¶g - data finns redan frÃ¥n crawl

**InnehÃ¥ll:**
- Duplicate content detection (jÃ¤mfÃ¶r sidor pÃ¥ sajten)
- Thin content varningar (<300 ord)
- Keyword-densitet per sida
- UtÃ¶kad lÃ¤sbarhetsanalys (Flesch-Kincaid utÃ¶ver LIX)
- Content gap-analys mot konkurrenter

---

### Prioritet 3: Bildoptimering
**VÃ¤rde:** PopulÃ¤rt - mÃ¥nga sajter missar detta

**InnehÃ¥ll:**
- WebP/AVIF-anvÃ¤ndning vs Ã¤ldre format
- Lazy loading-kontroll (loading="lazy")
- Responsive images (srcset, sizes)
- Komprimeringsgrad och filstorlek
- Alt-text kvalitet (inte bara finns/saknas)

---

### Prioritet 4: Teknisk SEO Deep Dive
**VÃ¤rde:** Avancerat - skiljer oss frÃ¥n enkla verktyg

**InnehÃ¥ll:**
- JavaScript-rendering check (SPA-problem)
- Canonicals-analys och konflikter
- Redirect chains (301/302 kedjor)
- hreflang-validering (internationella sajter)
- XML sitemap-validering
- Robots.txt-analys och konflikter

---

### Prioritet 5: Lokal SEO (Svenskt fokus!)
**VÃ¤rde:** Unikt fÃ¶r svenska marknaden

**InnehÃ¥ll:**
- Schema LocalBusiness-validering
- NAP-konsistens (Namn, Adress, Telefon)
- Google Maps embed-kontroll
- Ã–ppettider i schema
- Svenska recensionsplattformar (Trustpilot, Reco)

---

### Implementeringsordning
1. **SÃ¤kerhetsanalys** - UI finns, bara backend behÃ¶vs (1-2 dagar)
2. **Bildoptimering** - Stor anvÃ¤ndarnytta (2-3 dagar)
3. **InnehÃ¥llsanalys** - Bygger pÃ¥ befintlig crawl-data (3-4 dagar)
4. **Teknisk SEO** - Avancerat vÃ¤rde (1 vecka)
5. **Lokal SEO** - Nischad men vÃ¤rdefull (1 vecka)

---

**Skapad**: 2025-10-06
**Senast uppdaterad**: 2025-12-21
**Status**: Planning
**NÃ¤sta milstolpe**: Fas 1 MVP implementation
